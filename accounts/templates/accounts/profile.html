{% extends 'base.html' %}

{% block content %}
  <h2>{{ user.username }}'s Profile</h2>

  <p>Joined on: {{ user.date_joined }}</p>

  <h3>Dot Art</h3>
  <div id="dot-art-grid" style="display: grid; grid-template-columns: repeat(15, 20px); grid-template-rows: repeat(15, 20px); width: 300px; height: 300px; border: 1px solid black;"></div>

  <script>
    const dotArtGrid = document.getElementById('dot-art-grid');
    function drawDotArt(dotArtString) {
      dotArtGrid.innerHTML = '';
      for (let i = 0; i < 225; i++) {
        const dot = document.createElement('div');
        dot.style.width = '20px';
        dot.style.height = '20px';
        dot.style.backgroundColor = dotArtString[i] === '1' ? 'black' : 'white';
        dot.style.border = '1px solid #eee';
        dotArtGrid.appendChild(dot);
      }
    }
    // Initial draw
    drawDotArt('{{ user_profile.dot_art }}');
  </script>

  <h3>About Me</h3>
  <p>Bio: {{ user_profile.bio|default:"Not set" }}</p>
  <p>Hobbies: {{ user_profile.hobbies|default:"Not set" }}</p>
  <p>Favorite Things: {{ user_profile.favorite_things|default:"Not set" }}</p>

  <p><a href="{% url 'edit_profile' %}">Edit Profile</a></p>
  <p><a href="{% url 'logout' %}">Logout</a></p>
{% endblock %}